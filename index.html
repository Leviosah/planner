<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
    />
    <link
      rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.8.1/css/all.css"
      integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf"
      crossorigin="anonymous"
    />
    <link
      href="https://fonts.googleapis.com/css?family=Open+Sans&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="style.css" />
    <title>Work Day Scheduler</title>
  </head>

  <body>
    <header class="jumbotron">
      <h1 class="display-3">Work Day Scheduler</h1>
      <p class="lead">A simple calendar app for scheduling your work day</p>
      <p id="currentDay" class="lead"></p>
    </header>
    <div class="container">
      <table id="schedule" class="time-block">
      </table>

    </div>

    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment.min.js"></script>

  <script>



// Set up a var for today's date

var today = moment().format('MMMM Do YYYY');
console.log(today);

// input today's date into currentday ptag
let dateHeader = $('#currentDay');
dateHeader.text(today);

// set up input variables


let inputText = document.getElementById("textInput");
console.log(inputText)

// set button variable
//document.getElementById("saveHour9").click(getInputValue);

// data attribute

var currentHour = new Date().getHours();;
//function getInputValue() {
  //var inputVal = document.getElementById("workHour9").value;
  //console.log(inputVal)
//}

// Building containers for
for(i=9; i<23; i++) {
  console.log(moment(i, "HH").format('hh a'));
  var description = localStorage.getItem(i);
  if(description==null)
  {
    description="";
  }
  if(i<currentHour)
  {
    blockColor="past";
  }
  else if(i==currentHour)
  {
    blockColor="present"
  }
  else{
    blockColor="future"
  }
  $("#schedule").append("<tr><td class=hour>"+moment(i, "HH").format('hh a')+"<td class="+blockColor+"><textarea data-hour"+i+" id = workHour" + i + ">"+description+"</textarea></td><td class=saveBtn id=saveHour" + i + "><i id=saveHour"+i+">Save</i></td></tr>");
  //document.getElementById("saveHour" + i).click(saveTxt);
  //document.getElementById("saveHour" + i).addEventListener("click", saveTxt);
  
  //function saveTxt(event) {
   // event.preventDefault();
    //var userInput = $("#workHour" + i).val();
    //console.log("below is user input")
   // console.log(userInput)
 // }

 //for(let i = 9; i < 17; i++) {
  // $('#saveHour' + i).click( function() {
   //  alert('you clicked ' + i);
  // });
 //}
}

$(".saveBtn").on("click", function(event) {
    var idtext = event.target.id;
    var i = idtext.substring(8,10);
    event.preventDefault();
    var userInput = $("#workHour"+i).val();
    console.log("below is user input");
    console.log(userInput);
    console.log("the below is i");
    console.log(i);
    localStorage.setItem(i, userInput);

});


 console.log("this is i " + i);
//function saveTxt(event, i) {
  //event.preventDefault();
 // var y = this.id.split("r")[1]
 // var z = document.getElementById("workHour" + i)
  // console.log("this is y " + y);
  // console.log("this is z " + z);
  //var x = $("#workHour" + i).val();
  
 // var userInput = $("#workHour9").val()
//  //console.log("below is i: ")
  //console.log(i)
  // console.log(userInput)
  // console.log("this is x " + x);
//}

console.log(localStorage)



// let textinput = dynamic inputfield = if savebtn is hit then input field saves to local storage as object

// prompt/alert to get storage working


  </script>
  </body>
</html>
